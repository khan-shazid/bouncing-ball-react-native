import{GraphQLError as r}from"graphql/error/GraphQLError.mjs";import{Kind as e}from"graphql/language/kinds.mjs";import{parse as n}from"graphql/language/parser.mjs";import{print as t}from"graphql/language/printer.mjs";import{make as o}from"wonka";function a(e){return"string"==typeof e?new r(e):"object"==typeof e&&e.message?new r(e.message,e.nodes,e.source,e.positions,e.path,e,e.extensions||{}):e}var i=function(r){function e(e){var n,t,o,i=e.networkError,s=e.response,c=(e.graphQLErrors||[]).map(a),u=(t=c,o="",void 0!==(n=i)?o="[Network] "+n.message:(void 0!==t&&t.forEach((function(r){o+="[GraphQL] "+r.message+"\n"})),o.trim()));r.call(this,u),this.name="CombinedError",this.message=u,this.graphQLErrors=c,this.networkError=i,this.response=s}return r&&(e.__proto__=r),(e.prototype=Object.create(r&&r.prototype)).constructor=e,e.prototype.toString=function(){return this.message},e}(Error);function s(r,e){r|=0;for(var n=0,t=0|e.length;n<t;n++)r=(r<<5)+r+e.charCodeAt(n);return r}function c(r){return s(5381,r)>>>0}var u=new Set,f=new WeakMap;function l(r){if(null===r||u.has(r))return"null";if("object"!=typeof r)return JSON.stringify(r)||"";if(r.toJSON)return l(r.toJSON());if(Array.isArray(r)){for(var e="[",n=0,t=r.length;n<t;n++){n>0&&(e+=",");var o=l(r[n]);e+=o.length>0?o:"null"}return e+"]"}var a=Object.keys(r).sort();if(!a.length&&r.constructor&&r.constructor!==Object){var i=f.get(r)||Math.random().toString(36).slice(2);return f.set(r,i),'{"__key":"'+i+'"}'}u.add(r);for(var s="{",c=0,p=a.length;c<p;c++){var d=a[c],h=l(r[d]);h&&(s.length>1&&(s+=","),s+=l(d)+":"+h)}return u.delete(r),s+"}"}function p(r){return u.clear(),l(r)}function d(r){var e=("string"!=typeof r?r.loc&&r.loc.source.body||t(r):r).replace(/([\s,]|#[^\n\r]+)+/g," ").trim();if("string"!=typeof r){var n="definitions"in r&&g(r);n&&(e="# "+n+"\n"+e),r.loc||(r.loc={start:0,end:e.length,source:{body:e,name:"gql",locationOffset:{line:1,column:1}}})}return e}var h=new Map;function v(r){var e,t;return"string"==typeof r?(e=c(d(r)),t=h.get(e)||n(r,{noLocation:!0})):(e=r.__key||c(d(r)),t=h.get(e)||r),t.loc||d(t),t.__key=e,h.set(e,t),t}function y(r,e){e||(e={});var n=v(r);return{key:s(n.__key,p(e))>>>0,query:n,variables:e}}function g(r){for(var n=0,t=r.definitions.length;n<t;n++){var o=r.definitions[n];if(o.kind===e.OPERATION_DEFINITION&&o.name)return o.name.value}}function m(r){for(var n=0,t=r.definitions.length;n<t;n++){var o=r.definitions[n];if(o.kind===e.OPERATION_DEFINITION)return o.operation}}function x(){return(x=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(r[t]=n[t])}return r}).apply(this,arguments)}function b(r,e,n){if(!("data"in e)&&!("errors"in e)||"path"in e)throw new Error("No Content");return{operation:r,data:e.data,error:Array.isArray(e.errors)?new i({graphQLErrors:e.errors,response:n}):void 0,extensions:"object"==typeof e.extensions&&e.extensions||void 0,hasNext:!!e.hasNext}}function O(r,e,n){var t=x({},r);if(t.hasNext=!!e.hasNext,!("path"in e))return"data"in e&&(t.data=e.data),t;Array.isArray(e.errors)&&(t.error=new i({graphQLErrors:t.error?t.error.graphQLErrors.concat(e.errors):e.errors,response:n}));for(var o,a=t.data=x({},t.data),s=0;s<e.path.length;)a=a[o=e.path[s++]]=Array.isArray(a[o])?[].concat(a[o]):x({},a[o]);return x(a,e.data),t}function E(r,e,n){return{operation:r,data:void 0,error:new i({networkError:e,response:n}),extensions:void 0}}function w(r){return"query"===r.kind&&!!r.context.preferGetMethod}function N(r){return{query:t(r.query),operationName:g(r.query),variables:r.variables||void 0,extensions:void 0}}function k(r,e){var n=w(r),t=r.context.url;if(!n||!e)return t;var o=[];return e.operationName&&o.push("operationName="+encodeURIComponent(e.operationName)),e.query&&o.push("query="+encodeURIComponent(e.query.replace(/#[^\n\r]+/g," ").trim())),e.variables&&o.push("variables="+encodeURIComponent(p(e.variables))),e.extensions&&o.push("extensions="+encodeURIComponent(p(e.extensions))),t+"?"+o.join("&")}function j(r,e){var n=w(r),t="function"==typeof r.context.fetchOptions?r.context.fetchOptions():r.context.fetchOptions||{};return x({},t,{body:!n&&e?JSON.stringify(e):void 0,method:n?"GET":"POST",headers:n?t.headers:x({},{"content-type":"application/json"},t.headers)})}var _="undefined"!=typeof Symbol?Symbol.asyncIterator:null,q="undefined"!=typeof TextDecoder?new TextDecoder:null,A=/content-type:[^\r\n]*application\/json/i,I=/boundary="?([^=";]+)"?/i;function S(r,e,n){var t="manual"===n.redirect?400:300,a=r.context.fetch;return o((function(o){var i=o.next,s=o.complete,c="undefined"!=typeof AbortController?new AbortController:null;c&&(n.signal=c.signal);var u,f=!1,l=!1;return Promise.resolve().then((function(){if(!f)return(a||fetch)(e,n)})).then((function(e){if(e)return l=(u=e).status<200||u.status>=t,function(r,e,n){var t=n.headers&&n.headers.get("Content-Type")||"";if(!/multipart\/mixed/i.test(t))return n.json().then((function(t){r(b(e,t,n))}));var o,a="---",i=t.match(I);i&&(a="--"+i[1]);var s=function(){};if(_&&n[_]){var c=n[_]();o=c.next.bind(c)}else{if(!("body"in n)||!n.body)throw new TypeError("Streaming requests unsupported");var u=n.body.getReader();s=u.cancel.bind(u),o=u.read.bind(u)}var f="",l=!0,p=null,d=null;return o().then((function t(i){if(!i.done){var s="Buffer"===(x=i.value).constructor.name?x.toString():q.decode(x),c=s.indexOf(a);for(c>-1?c+=f.length:c=f.indexOf(a),f+=s;c>-1;){var u=f.slice(0,c),h=f.slice(c+a.length);if(l)l=!1;else{var v=u.indexOf("\r\n\r\n")+4,y=u.slice(0,v),g=u.slice(v,u.lastIndexOf("\r\n")),m=void 0;if(A.test(y))try{m=JSON.parse(g),p=d=d?O(d,m,n):b(e,m,n)}catch(r){}if("--"===h.slice(0,2)||m&&!m.hasNext){if(!d)return r(b(e,{},n));break}}c=(f=h).indexOf(a)}}var x;if(p&&(r(p),p=null),!i.done&&(!d||d.hasNext))return o().then(t)})).finally(s)}(i,r,u)})).then(s).catch((function(e){if("SyntaxError"===e.name||"TypeError"===e.name){var n=new Error(e.message);throw n.stack=n.stack.split("\n").slice(0,2).join("\n")+"\n"+e.stack,n.constructor=e.constructor,n}if("AbortError"!==e.name){var t=E(r,l?new Error(u.statusText):e,u);i(t),s()}})),function(){f=!0,c&&c.abort()}}))}export{i as C,x as _,E as a,N as b,k as c,j as d,S as e,y as f,m as g,p as h,O as i,g as j,v as k,b as m,d as s};
//# sourceMappingURL=c23ae2c3.min.mjs.map
